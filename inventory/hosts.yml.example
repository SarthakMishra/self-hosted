---
# Ansible Inventory Template
# Copy this file to hosts.yml and customize with your server details
# WARNING: hosts.yml contains sensitive server IPs and is gitignored

all:
  children:
    # Docker Server Setup with Traefik Reverse Proxy
    docker_servers:
      hosts:
        server:
          ansible_host: server              # Will be dynamically updated by playbook
          node_type: server

  vars:
    # Connection settings (will be dynamically updated by playbook)
    ansible_user: admin                     # Preferred user, but playbook will try ubuntu if admin fails
    ansible_ssh_private_key_file: ~/.ssh/id_ed25519  # Path to your SSH key
    ansible_ssh_common_args: '-o StrictHostKeyChecking=no -o ConnectTimeout=10'
    
    # Privilege Escalation (required when not using root)
    ansible_become: true                    # Use sudo for root privileges
    ansible_become_method: sudo             # Use sudo method
    ansible_become_user: root               # Become root user
    
    # Python interpreter
    ansible_python_interpreter: /usr/bin/python3
    
    # Server Connection Configuration (loaded from vault.yml)
    server_public_ip: "{{ vault_server_public_ip }}"
    tailscale_magic_dns_suffix: "{{ vault_tailscale_magic_dns_suffix }}"

# Configuration Guide:
#
# COMPLETE SERVER SETUP (Recommended):
#   1. Edit ansible_host with your server IP: YOUR_SERVER_IP
#   2. Configure vault.yml with Tailscale auth key and Traefik settings
#   3. Run: ansible-playbook -i inventory/hosts.yml playbooks/setup.yml
#   4. Done! Server ready with Docker + Traefik reverse proxy + SSL
#
# SSH User Configuration:
#   - ansible_user: ubuntu    # AWS, DigitalOcean, Linode (default)
#   - ansible_user: debian    # Debian images
#   - ansible_user: admin     # Custom setups
#   - ansible_user: root      # Direct root (not recommended)
#
# Important:
#   - Ubuntu user typically has passwordless sudo by default
#   - Use Tailscale IPs for secure networking when available
#   - Deploy apps with Traefik labels for automatic SSL and routing 