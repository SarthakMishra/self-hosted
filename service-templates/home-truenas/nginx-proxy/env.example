# nginx-proxy Configuration with Step CA HTTPS Integration
# Copy this file to .env and update with your actual values

# =============================================================================
# NETWORK CONFIGURATION
# =============================================================================

# Your home server's IP address
HOME_SERVER_IP=192.168.1.100

# Domain suffix for local services
DOMAIN_SUFFIX=home

# Default hostname for nginx-proxy
DEFAULT_HOST=home

# =============================================================================
# ADGUARD DNS CONFIGURATION
# =============================================================================

# AdGuard container name (on same home-network)
ADGUARD_HOST=adguardhome
ADGUARD_WEB_PORT=80

# =============================================================================
# NGINX-PROXY CONFIGURATION
# =============================================================================

# Container versions
NGINX_PROXY_VERSION=latest
DOCKER_GEN_VERSION=latest
CERTBOT_VERSION=latest

# HTTPS Configuration
HTTPS_METHOD=redirect           # redirect, noredirect, or nossl
SSL_POLICY=Mozilla-Intermediate # Mozilla-Modern, Mozilla-Intermediate, Mozilla-Old

# =============================================================================
# STEP CA INTEGRATION
# =============================================================================

# Step CA connection (using container name for internal Docker network communication)
# HTTPS required for ACME protocol, but certificate verification skipped for internal communication
STEP_CA_URL=https://step-ca:9000
ACME_EMAIL=admin@homeserver.local

# Domains to automatically get certificates for
AUTO_CERT_DOMAINS=proxy.home portainer.home netdata.home ca.home sonarr.home radarr.home plex.home immich.home frigate.home

# =============================================================================
# ADGUARD + TAILSCALE SETUP INSTRUCTIONS
# =============================================================================

# 1. AdGuard DNS Records (DNS Settings → DNS rewrites):
#    A Record:    proxy.home → 192.168.1.100 (your HOME_SERVER_IP)
#    A Record:    *.home → 192.168.1.100 (wildcard for all services)
#    
#    For split DNS with Tailscale, configure AdGuard to return different IPs:
#    192.168.1.100 proxy.home     # Local network IP
#    100.x.x.x proxy.home         # Tailscale IP (configure in AdGuard access settings)
#
# 2. Router DHCP: Set DNS server to ADGUARD_HOST IP or use container name if on same network
#
# 3. Tailscale Split DNS (Optional):
#    - Admin Console → DNS → Add nameserver
#    - Nameserver: AdGuard container IP or external IP
#    - Domain: home
#    - This routes .home queries through AdGuard for tailnet clients 