# Restic Environment Configuration for Local Repository
# Generated by Ansible - do not edit manually

# Repository Configuration (Local)
export RESTIC_REPOSITORY="{{ restic_backup_root }}/repository"
export RESTIC_PASSWORD_FILE="{{ restic_backup_root }}/config/restic-password"

# Restic Options
export RESTIC_COMPRESSION="auto"
export RESTIC_PACK_SIZE="16"
export RESTIC_CACHE_DIR="{{ restic_backup_root }}/cache"

# Backup Configuration
export BACKUP_EXCLUDES_FILE="{{ restic_backup_root }}/config/excludes.txt"
export BACKUP_LOG_FILE="{{ restic_backup_root }}/logs/backup.log"
export METRICS_DIR="{{ restic_backup_root }}/metrics"

# Docker Swarm Backup Paths
export DOCKER_VOLUMES_PATH="/var/lib/docker/volumes"
export DOCKER_COMPOSE_PATH="{{ docker_stack_root }}"
export DOCKER_CONFIG_PATH="/etc/docker"

# System Information
export BACKUP_HOSTNAME="{{ inventory_hostname }}"
export BACKUP_NODE_TYPE="{{ node_type | default('unknown') }}"

# Health Check Configuration
{% if healthcheck_backup_url is defined %}
export HEALTHCHECK_URL="{{ healthcheck_backup_url }}"
{% endif %}

# Retention Policy
export KEEP_LAST="{{ restic_retention_keep_last | default(10) }}"
export KEEP_DAILY="{{ restic_retention_keep_daily | default(7) }}"
export KEEP_WEEKLY="{{ restic_retention_keep_weekly | default(4) }}"
export KEEP_MONTHLY="{{ restic_retention_keep_monthly | default(6) }}"
export KEEP_YEARLY="{{ restic_retention_keep_yearly | default(1) }}"

# Local Sync Configuration (for pull mechanism)
export SYNC_ENABLED="{{ restic_sync_enabled | default(true) }}"
export SYNC_MARKER_FILE="{{ restic_backup_root }}/sync-in-progress"
export CLEANUP_AFTER_SYNC="{{ restic_cleanup_after_sync | default(true) }}" 